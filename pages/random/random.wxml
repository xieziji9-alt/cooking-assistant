<view class="container">
  <!-- å¤´éƒ¨åŒºåŸŸ -->
  <view class="header">
    <text class="title">ğŸ² éšæœºæ¨è</text>
    <text class="subtitle">ä»{{recipeCount}}é“ç²¾é€‰èœè°±ä¸­éšæœºæ¨è</text>
  </view>

  <!-- æ¨èæ•°é‡é€‰æ‹© -->
  <view class="count-section">
    <view class="count-title">é€‰æ‹©æ¨èæ•°é‡ï¼š</view>
    <view class="count-options">
      <view class="count-option {{selectedCount === 1 ? 'active' : ''}}" 
            bindtap="selectCount" data-count="1">
        1é“èœ
      </view>
      <view class="count-option {{selectedCount === 3 ? 'active' : ''}}" 
            bindtap="selectCount" data-count="3">
        3é“èœ
      </view>
      <view class="count-option {{selectedCount === 5 ? 'active' : ''}}" 
            bindtap="selectCount" data-count="5">
        5é“èœ
      </view>
      <view class="count-option {{selectedCount === 10 ? 'active' : ''}}" 
            bindtap="selectCount" data-count="10">
        10é“èœ
      </view>
    </view>
  </view>

  <!-- æ¨èæŒ‰é’® -->
  <view class="action-section">
    <button class="recommend-btn" bindtap="getRandomRecipes" disabled="{{isLoading}}">
      {{isLoading ? 'æ¨èä¸­...' : 'ğŸ² å¼€å§‹éšæœºæ¨è'}}
    </button>
  </view>

  <!-- æ¨èç»“æœ -->
  <view class="results-section" wx:if="{{randomRecipes.length > 0}}">
    <view class="results-header">
      <text class="results-title">ğŸ‰ ä¸ºæ‚¨éšæœºæ¨è {{randomRecipes.length}} é“èœè°±ï¼š</text>
      <button class="clear-btn" bindtap="clearResults">æ¸…ç©ºç»“æœ</button>
    </view>
    
    <view class="recipe-list">
      <view class="recipe-card" wx:for="{{randomRecipes}}" wx:key="id" bindtap="goToDetail" data-id="{{item.id}}">
        <view class="recipe-header">
          <view class="recipe-number">{{index + 1}}</view>
          <view class="recipe-name">{{item.name}}</view>
          <view class="recipe-badges">
            <text class="video-hint" bindtap="openBilibiliVideo" data-url="{{item.bilibiliUrl}}" catchtap="openBilibiliVideo">ğŸ“º æ•™ç¨‹</text>
          </view>
        </view>
        
        <view class="recipe-desc">{{item.description}}</view>
        
        <view class="recipe-info">
          <text class="info-item">â­ {{item.difficulty}}</text>
          <text class="info-item">â° {{item.cookingTime}}åˆ†é’Ÿ</text>
          <text class="info-item">ğŸ½ï¸ {{item.category}}</text>
        </view>

        <view class="recipe-details">
          <view class="detail-section">
            <view class="detail-label">ğŸ¥¬ é£Ÿæï¼š</view>
            <view class="detail-content">
              <view wx:for="{{item.ingredients}}" wx:key="*this" wx:for-item="ingredient" class="ingredient-tag">
                {{ingredient}}
              </view>
            </view>
          </view>
          <view class="detail-section">
            <view class="detail-label">ğŸ³ å¨å…·ï¼š</view>
            <view class="detail-content">
              <view wx:for="{{item.cookware}}" wx:key="*this" wx:for-item="cookware" class="cookware-tag">
                {{cookware}}
              </view>
            </view>
          </view>
          <view class="detail-section" wx:if="{{item.bilibiliUrl}}">
            <view class="detail-label">ğŸ“º è§†é¢‘ï¼š</view>
            <view class="detail-content">
              <view class="video-link" bindtap="openBilibiliVideo" data-url="{{item.bilibiliUrl}}" catchtap="openBilibiliVideo">
                ç‚¹å‡»è§‚çœ‹Bç«™æ•™å­¦è§†é¢‘
              </view>
            </view>
          </view>
        </view>
      </view>
    </view>

    <!-- å†æ¬¡æ¨èæŒ‰é’® -->
    <view class="action-section">
      <button class="recommend-btn secondary" bindtap="getRandomRecipes">
        ğŸ”„ é‡æ–°éšæœºæ¨è
      </button>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{showEmptyState}}">
    <view class="empty-icon">ğŸ²</view>
    <view class="empty-title">ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å¼€å§‹éšæœºæ¨è</view>
    <view class="empty-desc">æˆ‘ä»¬ä¼šä»{{recipeCount}}é“ç²¾é€‰èœè°±ä¸­ä¸ºæ‚¨éšæœºæ¨è</view>
  </view>

  <!-- ç»Ÿè®¡ä¿¡æ¯ -->
  <view class="stats-section">
    <view class="stats-title">ğŸ“Š èœè°±åº“ç»Ÿè®¡</view>
    <view class="stats-grid">
      <view class="stat-item">
        <view class="stat-number">{{recipeCount}}</view>
        <view class="stat-label">æ€»èœè°±</view>
      </view>
      <view class="stat-item">
        <view class="stat-number">{{categoryStats['å®¶å¸¸èœ'] ? categoryStats['å®¶å¸¸èœ'] : 0}}</view>
        <view class="stat-label">å®¶å¸¸èœ</view>
      </view>
      <view class="stat-item">
        <view class="stat-number">{{categoryStats['å·èœ'] ? categoryStats['å·èœ'] : 0}}</view>
        <view class="stat-label">å·èœ</view>
      </view>
      <view class="stat-item">
        <view class="stat-number">{{categoryStats['ç´ èœ'] ? categoryStats['ç´ èœ'] : 0}}</view>
        <view class="stat-label">ç´ èœ</view>
      </view>
    </view>
  </view>
</view>
